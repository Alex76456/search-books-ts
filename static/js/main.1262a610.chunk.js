(this["webpackJsonpsearch-books-ts"]=this["webpackJsonpsearch-books-ts"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,s){},,function(e,t,s){},function(e,t,s){},,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),o=s(5),a=s.n(o),i=(s(13),s(4)),r=s.n(i),l=s(6),p=s(2),u=s(7),h=s(8),j=new(function(){function e(t){Object(u.a)(this,e),this._url=void 0,this._headers=void 0,this._url=t.baseUrl,this._headers=t.headers}return Object(h.a)(e,[{key:"_getResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getSnippets",value:function(e){return fetch("https://".concat(this._url,"/search.json?q=").concat(e),{headers:this._headers}).then(this._getResponse).catch((function(e){console.error(e)}))}},{key:"getSnippetImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"L";return fetch("https://covers.".concat(this._url,"/b/id/").concat(e,"-").concat(t,".jpg"),{headers:this._headers}).then(this._getResponse).catch((function(e){console.error(e)}))}}]),e}())({baseUrl:"openlibrary.org",headers:{Accept:"application/json"}}),b=(s(15),s(16),s(0)),d=function(){return Object(b.jsxs)("header",{className:"header",children:[Object(b.jsx)("img",{className:"header__logo",src:"https://cdn4.iconfinder.com/data/icons/science-and-technology-3-10/65/135-128.png",alt:"logo"}),Object(b.jsxs)("h1",{className:"header__title",children:["\u041d\u0430\u0439\u0442\u0438 \u0432",Object(b.jsx)("span",{className:"header__title-accent",children:"s"}),"\u0451!"]})]})},_=(s(18),s(19),function(e){var t=e.snippet,s=e.onBookClick;return Object(b.jsxs)("li",{className:"snippets__list-item",onClick:function(){s(t)},children:[Object(b.jsx)("img",{className:"snippets__image",src:t.cover_i?"https://covers.openlibrary.org/b/id/".concat(t.cover_i,"-M.jpg"):"https://missefficiency.nl/contents/media/l_naslagwerk_20171107144603.jpg",alt:t.name}),Object(b.jsxs)("div",{className:"snippets__container",children:[Object(b.jsx)("h2",{className:"snippets__snippet-title",children:t.title}),Object(b.jsx)("p",{className:"snippets__author",children:t.author_name})]})]})}),m=function(e){var t=e.onSnippetClick,s=e.snippets,c=e.onSearch,o=e.isRender,a=e.isSuccessImage,i=Object(n.useState)(""),r=Object(p.a)(i,2),l=r[0],u=r[1],h=Object(n.useState)(),j=Object(p.a)(h,2),d=j[0],m=j[1],f=Object(n.useState)(9),O=Object(p.a)(f,2),g=O[0],x=O[1];return Object(n.useEffect)((function(){""===l&&clearTimeout(d)}),[l,d]),Object(b.jsxs)("main",{className:"main",children:[Object(b.jsx)("section",{className:"search",children:Object(b.jsxs)("form",{className:"search__form",onSubmit:function(e){e.preventDefault(),c(l.replace(/ /g,"+")),u("")},noValidate:!0,children:[Object(b.jsx)("label",{className:"search__form-field",children:Object(b.jsx)("input",{className:"search__input",type:"text",name:"search-input",placeholder:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438",required:!0,value:l,onChange:function(e){u((function(t){return e.target.value})),clearTimeout(d),m(setTimeout((function(){console.log("\u0438\u0449\u0435\u0442",l),c(l.replace(/ /g,"+"))}),1e3))}})}),Object(b.jsx)("button",{className:"search__submit",type:"submit",disabled:""===l,children:"\u041f\u043e\u0438\u0441\u043a"})]})}),Object(b.jsxs)("section",{className:"snippets",children:[Object(b.jsx)("h2",{className:"snippets__title",children:o?"\u0418\u0434\u0435\u0442 \u043f\u043e\u0438\u0441\u043a...":"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430:"}),!a&&Object(b.jsx)("img",{className:"snippets__success-image",src:"https://giklive.com/wp-content/uploads/2017/09/travolta-confused.gif",alt:"\u043a\u043d\u0438\u0433\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(b.jsx)("ul",{className:"snippets__list",children:s.map((function(e,s){return s<=g&&Object(b.jsx)(_,{snippet:e,onBookClick:t},e.key)}))}),s.length>g&&Object(b.jsx)("button",{className:"snippets__help-button",type:"button",onClick:function(){x(g+4)},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435..."}),window.pageYOffset>600&&Object(b.jsx)("button",{className:"snippets__help-button",type:"button",onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f"})]})]})},f=(s(20),function(e){var t=e.book,s=e.isOpen,c=e.onClose,o=e.onEscClose;return Object(n.useEffect)((function(){if(s){var e=function(e){"Escape"===e.key&&c()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}}),[s,c]),Object(b.jsx)("div",{className:"popup popup_type_book  ".concat(s&&"popup_opened"),onClick:o,children:Object(b.jsxs)("div",{className:"popup__content",children:[Object(b.jsx)("button",{type:"button",className:"popup__close",onClick:c}),Object(b.jsx)("img",{className:"popup__image",src:t.cover_i?"https://covers.openlibrary.org/b/id/".concat(t.cover_i,"-L.jpg"):"https://missefficiency.nl/contents/media/l_naslagwerk_20171107144603.jpg",alt:t.title}),Object(b.jsxs)("h2",{className:"popup__book-title",children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: ",t.title]}),Object(b.jsxs)("h3",{className:"popup__book-author",children:["\u0410\u0432\u0442\u043e\u0440: ",t.author_name]}),Object(b.jsxs)("p",{className:"popup__book-publish",children:["\u0413\u043e\u0434 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438: ",t.publish_year]}),Object(b.jsxs)("p",{className:"popup__book-publisher",children:["\u0418\u0437\u0434\u0430\u0442\u0435\u043b\u044c: ",t.publisher]}),Object(b.jsxs)("p",{className:"popup__book-isbn",children:["ISBN \u043a\u043d\u0438\u0433\u0438: ",t.isbn]})]})})}),O=(s(21),function(){return Object(b.jsx)("footer",{className:"footer",children:Object(b.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",(new Date).getFullYear()," Aleksey Logvenkin"]})})}),g={name:"",cover_i:"",title:"",author_name:"",publish_year:0,publisher:"",isbn:"",key:""},x=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),s=t[0],c=t[1],o=Object(n.useState)(!1),a=Object(p.a)(o,2),i=a[0],u=a[1],h=Object(n.useState)(g),_=Object(p.a)(h,2),x=_[0],k=_[1],v=Object(n.useState)(!1),N=Object(p.a)(v,2),y=N[0],S=N[1],C=Object(n.useState)(!0),w=Object(p.a)(C,2),E=w[0],L=w[1];function F(){u(!1),k(g)}function I(){return(I=Object(l.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=9;break}return S(!0),e.next=4,j.getSnippets(t);case 4:s=e.sent,console.log(s.numFound,"\u043d\u0430\u0439\u0434\u0435\u043d\u043e"),L(s.numFound>0),c(s.docs),S(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsx)("div",{className:"root",children:Object(b.jsxs)("div",{className:"page",children:[Object(b.jsx)(d,{}),Object(b.jsx)(m,{snippets:s,onSnippetClick:function(e){k(e),u(!0)},onSearch:function(e){return I.apply(this,arguments)},isRender:y,isSuccessImage:E}),Object(b.jsx)(O,{}),Object(b.jsx)(f,{book:x,isOpen:i,onClose:F,onEscClose:function(e){e.target.classList.contains("popup")&&F()}})]})})},k=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,23)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,a=t.getTTFB;s(e),n(e),c(e),o(e),a(e)}))};a.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(x,{})}),document.getElementById("root")),k()}],[[22,1,2]]]);
//# sourceMappingURL=main.1262a610.chunk.js.map